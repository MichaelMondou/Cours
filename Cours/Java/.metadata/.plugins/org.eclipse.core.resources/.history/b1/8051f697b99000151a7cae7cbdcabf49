package hex;

import java.awt.Color;
import java.awt.Point;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Observable;

public class Model extends Observable {

	private Grid plateau;

	private ArrayList<Player> joueur;

	private int tourJoueur=1;

	public void nextData() {

	}

	public Model() {
		plateau = new Grid();
		joueur = new ArrayList<Player>();
		Player j1 = new Player("player1", Color.BLACK);
		Player j2 = new Player("player2", Color.WHITE);
		joueur.add(j1);
		joueur.add(j2);
		System.out.println(j1.getIdentity());
		System.out.println(j2.getIdentity());

	}

	public Grid getPlateau() {
		return plateau;
	}

	public void setPlateau(Grid plateau) {
		this.plateau = plateau;
	}

	public void modifyColor(Point p) {
		for (int i = 0; i < getPlateau().getCell().size(); i++) {
			for (int j = 0; j < getPlateau().getCell().get(i).size(); j++) {
				if (getPlateau().getCell().get(i).get(j).contains(p)
						&& !(getPlateau().getCell().get(i).get(j).isModify())) {
					/*
					 * if (tourJoueur == 1) {
					 * getPlateau().getCellules().get(i).get(j).setCouleur(Color
					 * .BLACK);
					 * getPlateau().getCellules().get(i).get(j).setModify(true);
					 * tourJoueur = 2;
					 * //System.out.println(getPlateau().cellules.get(i).get(j).
					 * getL()+" "+getPlateau().cellules.get(i).get(j).getC());
					 * 
					 * setChanged(); notifyObservers(); } else {
					 * getPlateau().getCellules().get(i).get(j).setCouleur(Color
					 * .WHITE);
					 * getPlateau().getCellules().get(i).get(j).setModify(true);
					 * tourJoueur = 1; setChanged(); notifyObservers();
					 */
					
				   
				   
				   
					getPlateau().getCell().get(i).get(j).setColor(joueur.get(tourJoueur-1).getColor());
					getPlateau().getCell().get(i).get(j).setModify(true);
					joueur.get(tourJoueur-1).addCell(getPlateau().getCell().get(i).get(j));
					getPlateau().affectZone(getPlateau().getCell().get(i).get(j), joueur.get(tourJoueur-1));
					changeTourJoueur();
					setChanged();
					notifyObservers();
				}
			}
		}
	}

	private void changeTourJoueur() {
		if (tourJoueur == 1)
			tourJoueur = 2;
		else
			tourJoueur = 1;

	}
}
